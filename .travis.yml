language: node_js
node_js: stable

# Travis-CI Caching
cache:
  directories:
    - node_modules


# S: Build Lifecycle
install:
  - npm install

# before_script:
  # - npm install -g gulp

script:
  - hexo generate

after_script:
  - cd public
  - git init
  - git config user.name "iamzifei"
  - git config user.email "iamzifei@gmail.com"
  - git add .
  - git commit -m "Update docs"
  - git push --force --quiet "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
# E: Build LifeCycle

branches:
  only:
    - master
env:
 global:
   - GH_REF: github.com/iamzifei/blog.git
   - GH_TOKEN:
     - secure: "sAIJK5CCHIJfilvOc5QwDCcbhCcDkkoKoanwL0/FNdDqLxnoqfQLcnHMuLcJqltAhqf3R+JgPYWxQKV3d3qcKuM+hT6RzP5H+rvXnXBvp+2jby1aiZV2FRJorTVmtes9s4ZbECb2jtDx+fWBrvqc2+DR4MqrVLWS+UmCEfMoU7UGSRdfx9OUkffQyt9iDPmv9AULwym62lrr+BlfNBQ8AfnN2JV5l8Qo3awPulC2awLu2WADDrR2jftJcJBdEGgWvnxSuvZatWuZrhf88+buR1NdCa40F+3VS3zrcCWHzvvDadFDn02ojUtupWsJhr5crCw682T4dyo3J+0LjJpM99mw6A75mKzq9gYVMpEVADQI2bG/T+Tdin6xE+zpyKdt6CtFyzSQJOaQU4UO2kKI4FCGkfvdeN3iITTfTPX80M/K53iS/cQNvxNSDppcDnNsoQoy0IXmZ8WINX7c53Vgc0gJVvPrvuCRjTzghd3m4JQR1IKMmpPX2Ju2qDMTEH+37GfuKqmZe4FnpvuxtqVjI6QALlb7zaF4AA/HXfxTHFmLZMKkO2NUU/kNNhFxIB6zZ6ObrqT4G2lobpgO5/UF8+q6AQ+UGL7Y+y+w3xX9igjsjqftyktcvZczS0RoWsUEYo04mIHiUQzCI6LCBnWsRuXkiMqZVwHRvEhMwnlT2RM="
